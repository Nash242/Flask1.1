<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Prompt</title>
    <link href="{{url_for('static',filename='css/bootstrap.min.css')}}" rel="stylesheet" >
    <link rel="stylesheet" href="{{url_for('static',filename='css/style2.css')}}">  
    <style>
      .switch {
                position: relative;
                display: inline-block;
                width: 60px;
                height: 27px;
                }

                .switch input { 
                opacity: 0;
                width: 0;
                height: 0;
                }

                .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                -webkit-transition: .4s;
                transition: .4s;
                }

                .slider:before {
                position: absolute;
                content: "";
                height: 20px;
                width: 20px;
                left: 6px;
                bottom: 3.5px;
                background-color: white;
                -webkit-transition: .4s;
                transition: .4s;
                }

                input:checked + .slider {
                background-color: #2196F3;
                }

                input:focus + .slider {
                box-shadow: 0 0 1px #2196F3;
                }

                input:checked + .slider:before {
                -webkit-transform: translateX(26px);
                -ms-transform: translateX(26px);
                transform: translateX(26px);
                }

                /* Rounded sliders */
                .slider.round {
                border-radius: 34px;
                }

                .slider.round:before {
                border-radius: 50%;
                }  
    </style>
</head>
  <body class="bg-body1">
    <div class="row mx-0 ">
        <div class="col-12 px-0">
            <nav class="bg-dark px-2">
                <div class="">
                    <svg class="logo" viewBox="0 0 244 110" version="1.1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
                    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                    <title>Genpact</title>
                    <g id="Group_4">
                    <g id="Group_3">
                        <g id="Group_1">
                        <path id="Path_1"
                            d="M94.139,60.45c2.875,0 5.263,-2.552 5.263,-5.753c0,-3.201 -2.388,-5.754 -5.263,-5.754c-2.834,0 -5.223,2.553 -5.223,5.754c0,3.201 2.391,5.753 5.223,5.753m-4.616,4.578c0.83,1.731 2.574,2.848 4.493,2.877c2.834,0 5.102,-2.471 5.102,-5.509l-0,-0.204l-0.081,-0.04c-1.533,1.606 -3.651,2.527 -5.871,2.553c-4.857,-0 -8.786,-4.498 -8.786,-10.008c0,-5.551 3.929,-10.008 8.786,-10.008c2.229,0.023 4.353,0.961 5.871,2.593l0.081,-0.041l-0,-2.026l4.534,0l-0,17.181c-0,5.428 -4.008,9.805 -9.434,9.805c-3.505,0.016 -6.759,-1.861 -8.501,-4.903l3.806,-2.27Z"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_2"
                            d="M120.009,52.063l0.041,-0.081c-1.012,-1.864 -2.793,-3.12 -4.858,-3.12c-2.146,-0 -3.805,1.175 -4.899,3.12l0.04,0.081l9.676,-0Zm-0.525,6.523l3.156,3.12c-1.887,1.918 -4.469,2.999 -7.16,2.999c-5.497,0 -10.025,-4.511 -10.046,-10.008c-0,-5.551 4.333,-10.008 9.758,-10.008c5.384,-0 9.717,4.457 9.717,10.008c0.021,0.38 -0.006,0.761 -0.081,1.134l-14.859,-0c0,2.107 2.469,4.579 5.304,4.579c1.591,-0.02 3.109,-0.677 4.211,-1.824"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_3"
                            d="M131.352,54.697l-0,9.481l-4.535,-0l0,-18.963l4.535,0l-0,2.309l0.081,0.042c1.371,-1.791 3.494,-2.853 5.75,-2.877c8.096,0 8.299,7.374 8.299,9.643l-0,9.846l-4.534,-0l-0,-9.481c-0,-2.269 -0.042,-5.754 -4.737,-5.754c-2.673,0 -4.86,2.553 -4.86,5.754"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_4"
                            d="M157.214,48.943c-2.915,0 -5.264,2.553 -5.264,5.713c0,3.201 2.349,5.754 5.264,5.754c2.835,-0 5.223,-2.553 5.223,-5.754c0,-3.16 -2.39,-5.713 -5.223,-5.713m0.972,15.762c-2.244,-0.004 -4.388,-0.944 -5.911,-2.593l-0.081,0.04l-0,9.522l-4.535,-0l0,-26.458l4.535,-0l-0,1.984l0.081,0.042c1.62,-1.581 3.603,-2.553 5.911,-2.553c4.859,-0 8.786,4.457 8.786,10.008c0,5.55 -3.927,10.007 -8.786,10.007"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_5"
                            d="M178.265,60.41c2.875,-0 5.223,-2.512 5.223,-5.713c0,-3.201 -2.348,-5.754 -5.223,-5.754c-2.834,0 -5.223,2.553 -5.223,5.754c-0,3.2 2.39,5.713 5.223,5.713m-0.971,-15.722c2.228,0.023 4.352,0.962 5.869,2.594l0.082,-0.04l0,-2.026l4.535,-0l-0,18.962l-4.535,0l-0,-1.945l-0.082,-0.081c-1.532,1.606 -3.65,2.527 -5.869,2.553c-4.86,-0 -8.787,-4.458 -8.787,-10.008c-0,-5.551 3.927,-10.009 8.787,-10.009"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_6"
                            d="M206.725,61.706c-1.882,1.918 -4.458,2.999 -7.144,2.999c-5.49,-0 -10.008,-4.518 -10.008,-10.008c0,-5.491 4.518,-10.009 10.008,-10.009c2.686,0 5.262,1.082 7.144,2.999l-3.199,2.998c-1.015,-1.117 -2.458,-1.751 -3.967,-1.742c-3.077,-0 -5.506,2.593 -5.506,5.755c-0,3.162 2.429,5.713 5.506,5.713c1.538,-0.006 3.006,-0.652 4.049,-1.783l3.117,3.078Z"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_7"
                            d="M215.843,49.591l0,14.586l-4.534,0l-0,-14.586l-3.145,0l-0,-4.375l3.145,-0l-0,-8.509l4.534,-0l0,8.509l3.144,-0l-0,4.375l-3.144,0Z"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        </g>
                        <g id="Group_2">
                        <path id="Path_8" d="M45.362,83.281l20.347,-14.14l0,-14.142l-20.347,14.032l0,14.25Z"
                            style="fill:#073262;fill-rule:nonzero;"></path>
                        <path id="Path_9"
                            d="M65.706,40.855l-10.264,7.119l-10.08,-7.005l-10.096,7.015l-10.253,-7.125l20.347,-14.14l20.346,14.136Z"
                            style="fill:#ff555f;fill-rule:nonzero;"></path>
                        <path id="Path_10"
                            d="M35.267,62.016l-0,-14.032l-10.253,-7.125l-0,28.282l20.348,14.14l0,-14.25l-10.095,-7.015Z"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_11" d="M45.362,54.99l0,14.041l10.127,-6.983l-10.127,-7.058Z"
                            style="fill:#00aecf;fill-rule:nonzero;"></path>
                        <path id="Path_12" d="M65.709,55l-10.267,-7.028l-10.08,7.017l10.127,7.057l10.222,-7.048l-0.002,0.002Z"
                            style="fill:#ff555f;fill-rule:nonzero;"></path>
                        </g>
                    </g>
                    </g>
                    </svg>
                </div>
              </nav>
        </div>
    </div>
    <div id="showalert" style="display:none;">
        <div  class="alert alert-danger d-flex align-items-center my-4 justify-content-center" role="alert" >
            
        </div>
    </div>
    <div class="row mx-0 mt-5">
        <div class="col-11 border mx-auto p-3 bg-white " id="">
          <div class="mb-3">
            <div class="d-flex flex-row justify-content-between mb-1 align-items-center">
              <span class="fs-4 fw-medium">PROMPT :</span>
              <div class="align-items-center ">
                <span class="edit-text">EDIT OFF</span>
                <label class="switch" >
                    <input id="toggleButton" type="checkbox" >
                    <span class="slider round"></span>
                  </label>
              </div>
            </div>
            <textarea class="form-control" id="promptinput" rows="12" disabled style="white-space: pre-line;    resize: none;
            "></textarea>
          </div> 
        </div>
    </div>





    <script src="{{url_for('static',filename='js/bootstrap.bundle.min.js')}}" ></script>
    <script src="{{url_for('static',filename='js/jquery.min.js')}}" ></script>

  

   <script>
    var toggleButton = document.getElementById('toggleButton');
        $(document).ready(function() {
            $.ajax({
                url: '/sendprompt', 
                type:'GET',
                contentType: false, 
                processData: false, 
                success: function(data) {
                    console.log(data);
                    if(data.msg == "success"){
                        let regex = /\n+/g;
                        let result = data.mdata.replace(regex, '\n');
                        $("#promptinput").val(result)
                        $("#showalert").hide()
                    }else{
                        $("#showalert").show()
                        $(".alert").html(`<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="black" class="bi bi-exclamation-diamond" viewBox="0 0 16 16">
                                                <path d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                                                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                                          </svg>
                                          <div >
                                            <span id="alert-text">&nbsp &nbsp Error while fetching data...!</span>
                                          </div>`)
                    }
                },
                error: function(error) {
                    console.error('Error uploading files:', error);  
                    $("#showalert").show()
                    $(".alert").html(`<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="black" class="bi bi-exclamation-diamond" viewBox="0 0 16 16">
                                                <path d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                                                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                                          </svg>
                                          <div >
                                            <span id="alert-text">&nbsp &nbsp Error while fetching data...!</span>
                                          </div>`)
                }
              });
            })

            toggleButton.addEventListener('change', function() {
                if (toggleButton.checked) {
                   $(".edit-text").text('EDIT ON').css('color','red')
                   $('#promptinput').prop('disabled', false);
                } else {
                   $('#promptinput').prop('disabled', true);
                    $(".edit-text").text('EDIT OFF').css('color','lightslategrey')
                    let formdata=new FormData()
                    console.log($('#promptinput').val());
                    formdata.append('prompt',$('#promptinput').val())
                    $.ajax({
                            url: '/updateprompt', 
                            type:'POST',
                            data:formdata,
                            contentType: false, 
                            processData: false, 
                            success: function(data) {
                               console.log(data);
                               if(data.msg == 'success'){
                                 $("#showalert").hide()
                               }else{
                                $("#showalert").show()
                                $(".alert").html(`<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="black" class="bi bi-exclamation-diamond" viewBox="0 0 16 16">
                                                <path d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                                                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                                          </svg>
                                          <div >
                                            <span id="alert-text">&nbsp &nbsp Error while updating data...!</span>
                                          </div>`)
                               } 
                            },
                            error: function(error) {
                                console.error('Error uploading files:', error);
                                $("#showalert").show() 
                                $(".alert").html(`<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="black" class="bi bi-exclamation-diamond" viewBox="0 0 16 16">
                                                <path d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                                                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                                          </svg>
                                          <div >
                                            <span id="alert-text">&nbsp &nbsp Error while updating data...!</span>
                                          </div>`) 
                            }
                        });
                }
            });
    </script>
</body>
</html>